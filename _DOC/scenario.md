## Сценарий

### Словарь сущностей

**Игра** — отвечает за логику игры. Хранит доступные словари.  

**Игрок** - сущность, которая осуществляет геймплей. Игрок хранит составленный им список слов, текущее составленное 
слово, вставленную им букву. Игрок может взаимодействовать с игровым полем, выделяя ячейки и вставляя в них буквы

**Словарь** — контейнер, который хранит в себе все доступные слова. Сущностей может быть несколько, что может сделать 
игру более вариативной(например, сделать режим, в основе которого лежат сленговые и жаргонные слова). Осуществляет поиск
заданного слова. Можно добавить новое слово в словарь.

**Ячейка** - квадратная область, которую можно выделять и хранить в ней буквы. 

**Заблокированная ячейка** - ячейка, с которой нельзя взаимодействовать. 

**Игровое поле** - контейнер, хранящий в себе ячейки. 

**Кастомизированное игровое поле** - контейнер, хранящий в себе ячейки. В конце хода блокирует одну случайную ячейку.

**Алфавит** - контейнер, хранящий в себе все доступные буквы.

**Кастомизированный алфавит** - контейнер, хранящий в себе все доступные буквы. После каждого хода.

### Главный успешный сценарий — игровое поле заканчивается, игрок с максимальным количеством очков побеждает

1. Пользователи инициализируют начало игры

>2. Пользователь выставляет предварительные настройки игры и игрового поля

>3. Игра загружает словари с файлов
> 
4. Пользователи нажимают кнопку "Начать"

>4. Пользователи начинают партию

5. **Делать**

> 5.1. Активный игрок делает ход
> 
5.2 Игра обновляет рейтинг игрока
 
5.2 Игра передает ход следующему игроку

**Пока** игровое поле не заполнено или игроки не завершили игру преждевременно

7. Игра считает победителем того, у кого больше очков

### Альтернативный поток событий — ничья

1. Игра определяет ничью, если у каждого из игроков поровну очков

### Дочерний сценарий "Пользователь выставляет предварительные настройки игры и игрового поля"

1. Пользователь выбирает размеры игрового поля

2. Пользователь дает имя для каждого игрока(в игру играют 2 игрока)

3. Пользователь выбирает уровень сложности игры

### Дочерний сценарий "Игра загружает словари с файлов"

1. Игра имеет изначально данные о расположении файлов со словарями, которые представляют собой текстовые файлы 
   со словами в именительном падеже
   
2. Игра загружает в память данные со словарей

### Дочерний сценарий "Пользователи начинают партию"

1. Игра генерирует игровое поле (поле NxM, заданного размера)

2. Игра по горизонтали автоматически вписывает посередине во всю ширину поля случайное слово из словаря 
   (ограничение — длина слова должна равняться ширине поля)

3. Игра выбирает случайным образом между двух игроков и дает ему первым ход


### Дочерний сценарий "Активный игрок делает ход"

> 1. Игрок выделяет ячейку, чтобы вписать в нее букву

2. Игрок вписывает букву в выделенную ячейку

3. Если игра обнаруживает букву, вписанную в ячейку не из русского алфавита

3.1. Игра запускает альтернативный сценарий "Вписанная в ячейку буква не является частью русского алфавита"

Иначе

> 3.1. Игрок выделяет ячейки, чтобы сформировать слово

3.2. Пользователь оповещает о том, что его слово выделено

3.3. Если среди выделенных слов нет той, которая была вписана в текущем ходу

3.3.1 Игра запускает альтернативный сценарий "Среди выделенных букв нет той, которая была вписана в текущем ходу"

Иначе

> 3.3.1. Игра проверяет допустимо ли слово

3.3.2. Если выделенное слово допустимо

3.3.2.1. Игра считает ход завершенным

### Дочерний сценарий "Игрок выделяет ячейку, чтобы вписать в нее букву"

1. Игрок инициирует выделение ячейки

2. Если данная ячейка находится недалеко от другой ячейки, в которой есть буква, или ячейка не заблокированна

2.1. Игра помечает ячейку как выделенную для вписывания буквы

Иначе

2.1. Игра запускает альтернативный сценарий "Ячейку нельзя выделить для вписывания буквы"

### Дочерний "Выделить ячейки, чтобы сформировать слово"

1. Игрок выделяет ячейку в таком порядке относительно предыдущих выделенных, в котором он задумал слово

2. Если выделяется пустая ячейка **или** выделяемая ячейка не является соседом предыдущей выделенной ячейки **или** ячейка заблокирована

2.1. Игра запускает альтернативный сценарий "Ячейку нельзя выделять при формировании слова"

### Дочерний сценарий "Проверка допустимости допустимо ли слово"

1. Игра ищет выделенное слово среди уже найденных в предыдущих ходах обоими игроками

2. Если выделенное слово не найдено

2.1. Игра ищет выделенное слово в доступных словарях

2.2. Если слово найдено в любом из доступных словарей

2.2.1. Игра считает выделенное слово корректным

Иначе

2.2.1. Если данное уже было отгадано ранее

2.2.1.1. Игра запускает альтернативный сценарий "Введенное слово уже было отгадано ранее"

2.2.1. Иначе

2.2.1.1. Игра запускает альтернативный сценарий "Введенное слово не существует в словарях"

### Альтернативный сценарий "Вписанная в ячейку буква не является частью русского алфавита"

1. Игра игнорирует ввод символа, если она не является частью русского алфавита

### Альтернативный сценарий "Ячейку нельзя выделить для вписывания буквы"

1. Игра игнорирует запрос на выделение ячейки, если выделяется пустая ячейка **или** выделяемая ячейка не является соседом предыдущей выделенной ячейки **или** выделяемая ячейка заблокирована
   
### Альтернативный сценарий "Среди выделенных букв нет той, которая была вписана в текущем ходу"

1. Игра игнорирует запрос на подтверждение, если среди выделенных ячеек нет той, в которую была вписана буква в текущем ходу
   
### Альтернативный сценарий "Введенное слово уже было отгадано ранее"

1. Игра удаляет введенную в этом ходе букву

2. Игра снимает выделение со всех выделенных ячеек

3. Игра выводит уведомление о том, что данное слово уже отгадывалось ранее в предыдущих ходах
   
4. Игра считает выделенное слово некорректным

### Альтернативный сценарий "Введенное слово не существует в словарях"

1. Игра предлагает игроку добавить слово словарь

2. Если игрок соглашается

2.1. Словарь добавляет новое слово

2.2. Происходит переход к п.1.3.3.2.1. в сценарии "Активный игрок делает ход"

Иначе

2.1. Игра удаляет введенную в этом ходе букву

2.2. Игра снимает выделение со всех выделенных ячеек

2.3. Игра выводит уведомление о том, что данное слово не существует в словарях

2.4. Игра считает выделенное слово некорректным


